FROM python:3.10-slim
WORKDIR /app
COPY . /app
# Install system deps for building packages
RUN apt-get update && apt-get install -y --no-install-recommends \
    build-essential \
    gcc \
    libssl-dev \
    libffi-dev \
    libpq-dev \
    && rm -rf /var/lib/apt/lists/*

# Pin numpy to 1.23.x and install shap
RUN pip install --upgrade pip
RUN pip install numpy==1.23.5 pandas scikit-learn shap==0.41.0 matplotlib joblib -q

ENV PYTHONPATH=/app/ProposedApproach

# Default command: run SHAP script and keep container alive
CMD ["python", "ProposedApproach/scripts/run_shap.py"]
